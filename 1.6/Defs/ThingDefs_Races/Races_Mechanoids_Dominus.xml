<?xml version="1.0" encoding="utf-8"?>
<Defs>
	<ThingDef ParentName="BaseMechanoid">
		<defName>APM_Mech_Dominus</defName>
		<label>Dominus</label>
		<description>Three powerful mechanoid types were created by an Archotech mind in an attempt to create a central commander of all mechanoid forces. Influenced by the Old Earth nation of Rome, the Dominus provides considerable buffs to nearby allies and personally challenges perceived threats in 1v1 melee combat. The pure force of its determination manifests in a psychic maelstrom forming around those it challenges, summoning a shield generator and increasing damage taken until one stands victorious or it exhausts its will after a certain amount of time. If this occurs, both duelists will be significantly weakened for a period. If a victor emerges, the opposite will occur. It can alternatively channel its will into a temporary wave of energy for its allies. Additionally, mechanitors can extend their command range in a radius around this mech if under their control.</description>
		<statBases>
			<MarketValue>1600</MarketValue>
			<MoveSpeed>3.5</MoveSpeed>
			<ArmorRating_Blunt>1.2</ArmorRating_Blunt>
			<ArmorRating_Sharp>1.2</ArmorRating_Sharp>
			<BandwidthCost MayRequire="Ludeon.Rimworld.Biotech">5</BandwidthCost>
			<ControlTakingTime MayRequire="Ludeon.Rimworld.Biotech">30</ControlTakingTime>
			<ToxicEnvironmentResistance MayRequire="Ludeon.RimWorld.Biotech">1</ToxicEnvironmentResistance>
			<MechEnergyLossPerHP MayRequire="Ludeon.Rimworld.Biotech">0.15</MechEnergyLossPerHP>
			<WastepacksPerRecharge MayRequire="Ludeon.Rimworld.Biotech">8</WastepacksPerRecharge>
			<EMPResistance MayRequire="Ludeon.Rimworld.Biotech">0.35</EMPResistance>
		</statBases>
		<tools>
			<li>
				<label>head</label>
				<capacities>
					<li>Blunt</li>
				</capacities>
				<power>18.5</power>
				<cooldownTime>2.9</cooldownTime>
				<linkedBodyPartsGroup>HeadAttackTool</linkedBodyPartsGroup>
				<ensureLinkedBodyPartsGroupAlwaysUsable>true</ensureLinkedBodyPartsGroupAlwaysUsable>
			</li>
		</tools>
		<race>
			<body>APM_Dominus</body>
			<baseBodySize>3</baseBodySize>
			<baseHealthScale>6.2</baseHealthScale>
			<thinkTreeMain>Mechanoid</thinkTreeMain>
			<intelligence>ToolUser</intelligence>
			<mechWeightClass>Medium</mechWeightClass>
			<lifeStageAges>
				<li>
					<def>MechanoidFullyFormed</def>
					<minAge>0</minAge>
					<soundWounded>Pawn_Mech_Centipede_Wounded</soundWounded>
					<soundDeath>Pawn_Mech_Centipede_Death</soundDeath>
					<soundCall>Pawn_Mech_Centipede_Call</soundCall>
				</li>
				<li MayRequire="Ludeon.RimWorld.Biotech">
					<def>MechanoidFullyFormed</def>
					<minAge>100</minAge>
					<soundWounded>Pawn_Mech_Centipede_Wounded</soundWounded>
					<soundDeath>Pawn_Mech_Centipede_Death</soundDeath>
					<soundCall>Pawn_Mech_Centipede_Call</soundCall>
				</li>
			</lifeStageAges>
			<soundCallIntervalRange>2500~3500</soundCallIntervalRange>
			<soundMeleeHitPawn>Pawn_Melee_Punch_HitPawn</soundMeleeHitPawn>
			<soundMeleeHitBuilding>Pawn_Melee_Punch_HitBuilding_Generic</soundMeleeHitBuilding>
			<soundMeleeMiss>Pawn_Melee_Punch_Miss</soundMeleeMiss>
		</race>
		<butcherProducts>
			<Steel>50</Steel>
			<Plasteel>20</Plasteel>
		</butcherProducts>
	</ThingDef>

	<PawnKindDef ParentName="BaseMechanoidKind">
		<defName>APM_Mech_Dominus</defName>
		<label>dominus</label>
		<race>APM_Mech_Dominus</race>
		<combatPower>550</combatPower>
		<maxPerGroup MayRequire="Ludeon.Rimworld.Biotech">2</maxPerGroup>
		<controlGroupPortraitZoom MayRequire="Ludeon.Rimworld.Biotech">0.48</controlGroupPortraitZoom>
		<lifeStages>
			<li>
				<bodyGraphicData>
					<texPath>Things/Pawn/Mechanoid/Dominus/Regular/Dominus</texPath>
					<maskPath>Things/Pawn/Mechanoid/AllegianceOverlays/Dominus/Regular/Mech_Dominus</maskPath>
					<shaderType>CutoutWithOverlay</shaderType>
					<graphicClass>Graphic_Multi</graphicClass>
					<drawSize>2</drawSize>
					<shadowData>
						<volume>(0.4, 0.8, 0.4)</volume>
					</shadowData>
				</bodyGraphicData>
			</li>
			<li>
				<bodyGraphicData>
					<texPath>Things/Pawn/Mechanoid/Dominus/Regular/DominusAncient</texPath>
					<maskPath>Things/Pawn/Mechanoid/AllegianceOverlays/Dominus/Regular/Mech_Dominus</maskPath>
					<shaderType>CutoutWithOverlay</shaderType>
					<graphicClass>Graphic_Multi</graphicClass>
					<drawSize>2</drawSize>
					<shadowData>
						<volume>(0.4, 0.8, 0.4)</volume>
					</shadowData>
				</bodyGraphicData>
			</li>
		</lifeStages>
		<weaponMoney>99999~99999</weaponMoney>
		<weaponTags Inherit="False">
			<li>APM_WeaponDominusSpear</li>
		</weaponTags>
		<abilities>
			<li>APM_PressTheAttack</li>
			<li>APM_Mech_Duel</li>
		</abilities>
	</PawnKindDef>

	<AbilityDef>
		<defName>APM_PressTheAttack</defName>
		<label>Press The Attack</label>
		<description>PLACEHOLDER</description>
		<iconPath>UI/PressTheAttack</iconPath>
		<cooldownTicksRange>180000</cooldownTicksRange> <!-- 3 days -->
		<targetRequired>false</targetRequired>
		<hostile>false</hostile>
		<casterMustBeCapableOfViolence>false</casterMustBeCapableOfViolence>
		<canUseAoeToGetTargets>true</canUseAoeToGetTargets>
		<showCastingProgressBar>true</showCastingProgressBar>
		<statBases>
			<Ability_EffectRadius>12</Ability_EffectRadius>
			<Ability_Duration>150</Ability_Duration>
		</statBases>
		<verbProperties>
			<verbClass>Verb_CastAbility</verbClass>
			<warmupTime>1</warmupTime>
			<range>12.9</range>
			<targetParams>
				<canTargetSelf>true</canTargetSelf>
			</targetParams>
		</verbProperties>
		<comps>
			<li Class="CompProperties_AbilityGiveHediff">
				<compClass>CompAbilityEffect_GiveHediff</compClass>
				<hediffDef>APM_Hediff_PressTheAttack</hediffDef>
				<applyToSelf>false</applyToSelf>
			</li>
		</comps>
	</AbilityDef>

	<HediffDef>
		<defName>APM_Hediff_PressTheAttack</defName>
		<label>Press The Attack</label>
		<description>PLACEHOLDER</description>
		<hediffClass>HediffWithComps</hediffClass>
		<comps>
			<li Class="HediffCompProperties_Disappears">
				<showRemainingTime>True</showRemainingTime>
			</li>
			<li Class="HediffCompProperties_DisappearsOnDeath" />
		</comps>
		<isBad>false</isBad>
		<stages>
			<li>
				<painFactor>0.85</painFactor>
				<capMods>
					<li>
						<capacity>Consciousness</capacity>
						<offset>0.10</offset>
					</li>
					<li>
						<capacity>Moving</capacity>
						<offset>0.15</offset>
					</li>
				</capMods>
			</li>
		</stages>
	</HediffDef>

	<ThoughtDef>
		<defName>APM_Thought_PressTheAttack</defName>
		<workerClass>ThoughtWorker_Hediff</workerClass>
		<hediff>APM_Hediff_PressTheAttack</hediff>
		<validWhileDespawned>true</validWhileDespawned>
		<developmentalStageFilter>Baby, Child, Adult</developmentalStageFilter>
		<stages>
			<li>
				<label>Press The Attack</label>
				<description>PLACEHOLDER.</description>
				<baseMoodEffect>3</baseMoodEffect>
			</li>
		</stages>
	</ThoughtDef>

	<AbilityDef>
		<defName>APM_Mech_Duel</defName>
		<label>the duel trial</label>
		<description>PLACEHOLDER</description>
		<iconPath>UI/Duel</iconPath>
		<cooldownTicksRange>1800</cooldownTicksRange> <!-- 30 seconds -->
		<targetRequired>true</targetRequired>
		<hostile>true</hostile>
		<verbProperties>
			<verbClass>Verb_CastAbility</verbClass>
			<warmupTime>1</warmupTime>
			<drawAimPie>false</drawAimPie>
			<range>5</range>
			<targetParams>
				<canTargetCorpses>false</canTargetCorpses>
				<canTargetItems>false</canTargetItems>
				<mapObjectTargetsMustBeAutoAttackable>false</mapObjectTargetsMustBeAutoAttackable>
				<canTargetSelf>false</canTargetSelf>
				<canTargetPawns>true</canTargetPawns>
				<neverTargetIncapacitated>true</neverTargetIncapacitated>
				<canTargetAnimals>false</canTargetAnimals>
				<canTargetBuildings>false</canTargetBuildings>
				<thingCategory>None</thingCategory>
			</targetParams>
		</verbProperties>
		<comps>
			<li Class="CompProperties_AbilityGiveMentalState">
				<compClass>CompAbilityEffect_GiveMentalState</compClass>
				<stateDef>APM_Duel</stateDef>
				<stateDefForMechs>APM_Duel</stateDefForMechs>
				<applyToSelf>false</applyToSelf>
				<forced>true</forced>
			</li>
			<li Class="ApexMechanoids.CompProperties_SpawnThingDuelAttached">
				<thing>APM_DuelSpot</thing>
			</li>
		</comps>
	</AbilityDef>

</Defs>